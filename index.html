<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One-Click Response System</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8fafc;
      color: #0f172a;
      min-height: 100vh;
    }

    /* í—¤ë” */
    .header {
      background: #fff;
      border-bottom: 1px solid #e2e8f0;
      padding: 16px 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 700;
    }

    .tabs {
      display: flex;
      gap: 8px;
    }

    .tab {
      padding: 10px 20px;
      border: none;
      background: #f1f5f9;
      font-size: 14px;
      font-weight: 600;
      color: #64748b;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.15s;
    }

    .tab:hover {
      background: #e2e8f0;
    }

    .tab.active {
      background: #3b82f6;
      color: #fff;
    }

    /* ë©”ì¸ */
    .main {
      height: calc(100vh - 65px);
      overflow: hidden;
    }

    /* íƒ­ ì»¨í…ì¸  */
    .tab-content {
      display: none;
      height: 100%;
    }

    .tab-content.active {
      display: block;
    }

    /* 3ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ */
    .three-column {
      display: grid;
      grid-template-columns: 200px 320px 1fr;
      height: 100%;
    }

    .column {
      background: #fff;
      border-right: 1px solid #e2e8f0;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .column:last-child {
      border-right: none;
      background: #f8fafc;
    }

    .column-header {
      padding: 16px 20px;
      border-bottom: 1px solid #f1f5f9;
      background: #fff;
      flex-shrink: 0;
    }

    .column-header-with-back {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .back-btn {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      background: #f1f5f9;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      color: #64748b;
      cursor: pointer;
      transition: all 0.15s;
    }

    .back-btn:hover {
      background: #e2e8f0;
      color: #334155;
    }

    .column-title {
      font-size: 14px;
      font-weight: 700;
      color: #334155;
    }

    .column-subtitle {
      font-size: 12px;
      color: #94a3b8;
      margin-top: 2px;
    }

    .column-body {
      flex: 1;
      overflow-y: auto;
    }

    /* ëŒ€ë¶„ë¥˜ (1ì—´) */
    .category-item {
      padding: 16px 20px;
      cursor: pointer;
      transition: all 0.15s;
      border-bottom: 1px solid #f1f5f9;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .category-item:hover {
      background: #f8fafc;
    }

    .category-item.active {
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
      padding-left: 17px;
    }

    .category-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .category-name {
      font-size: 14px;
      font-weight: 600;
      flex: 1;
    }

    .category-arrow {
      font-size: 12px;
      color: #94a3b8;
    }

    /* 2ì—´ - ì¤‘ë¶„ë¥˜/ì†Œë¶„ë¥˜ */
    .list-item {
      padding: 14px 20px;
      cursor: pointer;
      transition: all 0.15s;
      border-bottom: 1px solid #f1f5f9;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .list-item:hover {
      background: #f8fafc;
    }

    .list-item.active {
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
      padding-left: 17px;
    }

    .list-item-content {
      flex: 1;
      min-width: 0;
    }

    .list-item-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .list-item-sub {
      font-size: 12px;
      color: #94a3b8;
    }

    .list-item-arrow {
      font-size: 12px;
      color: #94a3b8;
      flex-shrink: 0;
      margin-left: 8px;
    }

    .list-item-actions {
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.15s;
      flex-shrink: 0;
      margin-left: 8px;
    }

    .list-item:hover .list-item-actions {
      opacity: 1;
    }

    .btn-icon {
      width: 28px;
      height: 28px;
      border: none;
      background: #e2e8f0;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748b;
    }

    .btn-icon:hover {
      background: #cbd5e1;
    }

    .btn-icon.danger:hover {
      background: #fee2e2;
      color: #dc2626;
    }

    /* ì¶”ê°€ ë²„íŠ¼ */
    .add-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 14px 20px;
      background: #f8fafc;
      border: none;
      cursor: pointer;
      color: #64748b;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.15s;
      border-bottom: 1px solid #f1f5f9;
    }

    .add-btn:hover {
      background: #eff6ff;
      color: #3b82f6;
    }

    /* 3ì—´ - í…œí”Œë¦¿ ìƒì„¸ */
    .detail-container {
      padding: 24px;
      height: 100%;
      overflow-y: auto;
    }

    .detail-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .detail-title {
      font-size: 18px;
      font-weight: 700;
    }

    .detail-meta {
      font-size: 12px;
      color: #64748b;
      margin-top: 4px;
    }

    .detail-actions {
      display: flex;
      gap: 8px;
    }

    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
    }

    .btn-primary {
      background: #3b82f6;
      color: #fff;
    }

    .btn-primary:hover {
      background: #2563eb;
    }

    .btn-secondary {
      background: #e2e8f0;
      color: #475569;
    }

    .btn-secondary:hover {
      background: #cbd5e1;
    }

    .btn-danger {
      background: #fee2e2;
      color: #dc2626;
    }

    .btn-danger:hover {
      background: #fecaca;
    }

    /* ë³€ìˆ˜ ì„ íƒ ì˜ì—­ */
    .variable-section {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      border: 1px solid #e2e8f0;
    }

    .variable-label {
      font-size: 13px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 12px;
    }

    .variable-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .variable-option {
      padding: 8px 14px;
      background: #f1f5f9;
      border: 2px solid transparent;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.15s;
    }

    .variable-option:hover {
      background: #e2e8f0;
    }

    .variable-option.active {
      background: #eff6ff;
      border-color: #3b82f6;
      color: #1d4ed8;
      font-weight: 600;
    }

    .variable-add {
      padding: 8px 14px;
      background: #fff;
      border: 2px dashed #cbd5e1;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      color: #64748b;
      transition: all 0.15s;
    }

    .variable-add:hover {
      border-color: #3b82f6;
      color: #3b82f6;
    }

    /* í…œí”Œë¦¿ ë‚´ìš© */
    .template-content-section {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      border: 1px solid #e2e8f0;
    }

    .template-content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .template-content-label {
      font-size: 13px;
      font-weight: 600;
      color: #334155;
    }

    .template-preview {
      background: #f8fafc;
      border-radius: 8px;
      padding: 16px;
      font-size: 13px;
      line-height: 1.8;
      white-space: pre-wrap;
      min-height: 300px;
      max-height: 500px;
      overflow-y: auto;
    }

    .template-textarea {
      width: 100%;
      min-height: 300px;
      padding: 16px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 13px;
      line-height: 1.8;
      resize: vertical;
      font-family: inherit;
    }

    .template-textarea:focus {
      outline: none;
      border-color: #3b82f6;
    }

    /* ë¹ˆ ìƒíƒœ */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      color: #94a3b8;
      padding: 40px;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .empty-state-text {
      font-size: 14px;
      margin-bottom: 8px;
    }

    .empty-state-hint {
      font-size: 13px;
      color: #cbd5e1;
    }

    /* ëª¨ë‹¬ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.4);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: #fff;
      border-radius: 16px;
      width: 520px;
      max-height: 85vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid #f1f5f9;
    }

    .modal-title {
      font-size: 16px;
      font-weight: 700;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border: none;
      background: #f1f5f9;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      color: #64748b;
    }

    .modal-close:hover {
      background: #e2e8f0;
    }

    .modal-body {
      padding: 24px;
      overflow-y: auto;
    }

    .modal-footer {
      padding: 16px 24px;
      border-top: 1px solid #f1f5f9;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
    }

    .form-input:focus {
      outline: none;
      border-color: #3b82f6;
    }

    .form-hint {
      font-size: 12px;
      color: #94a3b8;
      margin-top: 6px;
    }

    .confirm-text {
      font-size: 14px;
      color: #475569;
      line-height: 1.6;
    }

    .confirm-highlight {
      font-weight: 600;
      color: #dc2626;
    }

    /* ìƒ‰ìƒ */
    .color-change { background: #3b82f6; }
    .color-add { background: #22c55e; }
    .color-service { background: #f59e0b; }

    /* í•˜ì´ë¼ì´íŠ¸ ë³€ìˆ˜ */
    .highlight-var {
      background: #fef3c7;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
      color: #92400e;
    }

    /* ==================== ì¸ì‚¬ì´íŠ¸ íƒ­ ==================== */
    .insight-container {
      padding: 24px;
      max-width: 1200px;
      margin: 0 auto;
      height: 100%;
      overflow-y: auto;
    }

    .insight-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .insight-card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
    }

    .insight-card-title {
      font-size: 14px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .insight-card-title::before {
      content: '';
      width: 4px;
      height: 16px;
      border-radius: 2px;
    }

    .insight-card.blue .insight-card-title::before { background: #3b82f6; }
    .insight-card.red .insight-card-title::before { background: #ef4444; }
    .insight-card.green .insight-card-title::before { background: #22c55e; }

    .rank-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      background: #f8fafc;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .rank-item:last-child {
      margin-bottom: 0;
    }

    .rank-num {
      width: 22px;
      height: 22px;
      background: #e2e8f0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      color: #64748b;
      margin-right: 12px;
    }

    .rank-info {
      flex: 1;
      min-width: 0;
    }

    .rank-name {
      font-size: 13px;
      font-weight: 500;
    }

    .rank-sub {
      font-size: 11px;
      color: #94a3b8;
      margin-top: 2px;
    }

    .rank-value {
      font-size: 13px;
      font-weight: 700;
      color: #3b82f6;
      margin-left: 8px;
    }

    .improve-item {
      background: #fef2f2;
    }

    .improve-item .rank-num {
      background: #fee2e2;
      color: #dc2626;
    }

    .improve-item .rank-value {
      color: #dc2626;
    }

    .stat-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .stat-box {
      text-align: center;
      padding: 16px;
      background: #f8fafc;
      border-radius: 8px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
    }

    .stat-value.blue { color: #3b82f6; }
    .stat-value.green { color: #22c55e; }
    .stat-value.yellow { color: #f59e0b; }

    .stat-label {
      font-size: 12px;
      color: #64748b;
      margin-top: 4px;
    }

    .usage-box {
      margin-top: 16px;
      padding: 16px;
      background: #f0fdf4;
      border-radius: 8px;
      text-align: center;
    }

    .usage-label {
      font-size: 12px;
      color: #166534;
      font-weight: 600;
    }

    .usage-value {
      font-size: 32px;
      font-weight: 700;
      color: #22c55e;
    }

    .empty-insight {
      padding: 20px;
      text-align: center;
      color: #94a3b8;
      font-size: 13px;
    }

    /* VOC ë¶„ì„ ì„¹ì…˜ */
    .voc-section {
      margin-top: 20px;
    }

    .voc-card {
      width: 100%;
    }

    .voc-card .insight-card-title::before {
      background: #8b5cf6;
    }

    .voc-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .voc-item {
      display: flex;
      flex-direction: column;
      padding: 16px;
      border-radius: 10px;
      gap: 10px;
    }

    .voc-danger {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .voc-warning {
      background: #fffbeb;
      border: 1px solid #fde68a;
    }

    .voc-success {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
    }

    .voc-icon {
      font-size: 18px;
    }

    .voc-content {
      flex: 1;
    }

    .voc-title {
      font-size: 14px;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 4px;
    }

    .voc-stat {
      font-size: 12px;
      color: #64748b;
    }

    .voc-action {
      font-size: 13px;
      font-weight: 600;
      color: #475569;
      padding-top: 10px;
      border-top: 1px solid rgba(0,0,0,0.1);
    }

    /* ==================== ë¬¸ì˜ ì²˜ë¦¬ íƒ­ ==================== */
    .inquiry-column {
      display: grid;
      grid-template-columns: 280px 340px 1fr;
      height: 100%;
    }

    .inquiry-column.completed-mode {
      grid-template-columns: 280px 1fr;
    }

    .inquiry-column.completed-mode .response-column {
      display: none;
    }

    .status-tabs {
      display: flex;
      padding: 12px;
      gap: 8px;
      border-bottom: 1px solid #f1f5f9;
    }

    .status-tab {
      flex: 1;
      padding: 10px;
      border: none;
      background: #f1f5f9;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      color: #64748b;
      cursor: pointer;
    }

    .status-tab:hover {
      background: #e2e8f0;
    }

    .status-tab.active {
      background: #3b82f6;
      color: #fff;
    }

    .inquiry-item {
      padding: 16px 20px;
      border-bottom: 1px solid #f1f5f9;
      cursor: pointer;
    }

    .inquiry-item:hover {
      background: #f8fafc;
    }

    .inquiry-item.active {
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
      padding-left: 17px;
    }

    .inquiry-merchant {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .inquiry-preview {
      font-size: 13px;
      color: #64748b;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .inquiry-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      font-size: 11px;
      color: #94a3b8;
    }

    .inquiry-badge {
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
    }

    .badge-original {
      background: #ecfdf5;
      color: #059669;
    }

    .badge-modified {
      background: #fef3c7;
      color: #d97706;
    }

    .inquiry-detail-container {
      padding: 24px;
      height: 100%;
      overflow-y: auto;
    }

    .inquiry-detail-header {
      margin-bottom: 20px;
    }

    .inquiry-detail-merchant {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .inquiry-detail-date {
      font-size: 13px;
      color: #64748b;
    }

    .inquiry-detail-content {
      background: #f8fafc;
      border-radius: 12px;
      padding: 20px;
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 24px;
    }

    .template-recommend {
      background: #ecfdf5;
      border: 1px solid #a7f3d0;
      border-radius: 12px;
      padding: 16px;
    }

    .template-recommend-label {
      font-size: 12px;
      font-weight: 600;
      color: #059669;
      margin-bottom: 8px;
    }

    .template-recommend-name {
      font-size: 15px;
      font-weight: 700;
      color: #065f46;
    }

    .template-recommend-keywords {
      font-size: 12px;
      color: #10b981;
      margin-top: 4px;
    }

    .no-template-box {
      padding: 16px;
      background: #fef3c7;
      border-radius: 12px;
      font-size: 13px;
      color: #92400e;
    }

    .response-container {
      padding: 20px;
      height: 100%;
      display: flex;
      flex-direction: column;
      background: #fff;
    }

    .template-picker {
      background: #f8fafc;
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 12px;
    }

    .tpl-picker-label {
      font-size: 11px;
      font-weight: 600;
      color: #64748b;
      margin-bottom: 8px;
    }

    .tpl-step {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      align-items: center;
      margin-bottom: 6px;
    }

    .tpl-step:last-child {
      margin-bottom: 0;
    }

    .tpl-step-arrow {
      color: #94a3b8;
      font-size: 11px;
      margin-right: 2px;
    }

    .tpl-chip {
      padding: 5px 10px;
      background: #fff;
      border: 1px solid #e2e8f0;
      border-radius: 14px;
      font-size: 11px;
      font-weight: 500;
      color: #475569;
      cursor: pointer;
      transition: all 0.15s;
    }

    .tpl-chip:hover {
      border-color: #3b82f6;
      color: #3b82f6;
    }

    .tpl-chip.active {
      background: #3b82f6;
      border-color: #3b82f6;
      color: #fff;
    }

    .tpl-chip.small {
      padding: 4px 8px;
      font-size: 11px;
    }

    .response-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .response-label {
      font-size: 14px;
      font-weight: 600;
    }

    .response-textarea {
      flex: 1;
      width: 100%;
      padding: 16px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 13px;
      line-height: 1.7;
      resize: vertical;
      font-family: inherit;
      min-height: 280px;
    }

    .textarea-wrap {
      flex: 1;
      display: flex;
      flex-direction: column;
      margin-bottom: 12px;
      position: relative;
    }

    .textarea-controls {
      display: flex;
      justify-content: flex-end;
      gap: 4px;
      margin-top: 6px;
    }

    .size-btn {
      width: 28px;
      height: 28px;
      border: 1px solid #e2e8f0;
      background: #fff;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      color: #64748b;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .size-btn:hover {
      background: #f1f5f9;
      border-color: #cbd5e1;
    }

    .response-textarea:focus {
      outline: none;
      border-color: #3b82f6;
    }

    .modify-reason-box {
      background: #fef3c7;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
    }

    .modify-reason-label {
      font-size: 12px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 6px;
    }

    .modify-reason-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #fcd34d;
      border-radius: 6px;
      font-size: 13px;
    }

    .modify-reason-input:focus {
      outline: none;
      border-color: #f59e0b;
    }

    .response-actions {
      display: flex;
      gap: 8px;
    }

    .response-actions .btn {
      flex: 1;
    }

    .compare-section {
      margin-top: 20px;
    }

    .section-label {
      font-size: 13px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 10px;
      margin-top: 20px;
    }

    .section-label:first-of-type {
      margin-top: 0;
    }

    .compare-label {
      font-size: 13px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 12px;
    }

    .compare-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .compare-box {
      padding: 16px;
      border-radius: 8px;
      font-size: 12px;
      line-height: 1.7;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }

    .compare-box-original {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
    }

    .compare-box-modified {
      background: #fef3c7;
      border: 1px solid #fcd34d;
    }

    .compare-box-label {
      font-size: 11px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .compare-box-label.original { color: #64748b; }
    .compare-box-label.modified { color: #d97706; }

    .modify-reason-display {
      margin-top: 12px;
      padding: 12px;
      background: #fef3c7;
      border-radius: 8px;
    }

    .modify-reason-display-label {
      font-size: 11px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 4px;
    }

    .modify-reason-display-text {
      font-size: 13px;
      color: #78350f;
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>One-Click Response System</h1>
    <div class="tabs">
      <button class="tab active" onclick="switchTab('insight')">ì¸ì‚¬ì´íŠ¸</button>
      <button class="tab" onclick="switchTab('inquiry')">ë¬¸ì˜ ì²˜ë¦¬</button>
      <button class="tab" onclick="switchTab('template')">í…œí”Œë¦¿ ê´€ë¦¬</button>
    </div>
  </header>

  <main class="main">
    <!-- ì¸ì‚¬ì´íŠ¸ íƒ­ -->
    <div class="tab-content active" id="tab-insight">
      <div class="insight-container">
        <div class="insight-grid">
          <!-- ì²˜ë¦¬ í˜„í™© (ì™¼ìª½ìœ¼ë¡œ ì´ë™) -->
          <div class="insight-card green">
            <h2 class="insight-card-title">ì²˜ë¦¬ í˜„í™©</h2>
            <div class="stat-grid">
              <div class="stat-box">
                <div class="stat-value blue" id="insight-pending">0</div>
                <div class="stat-label">ëŒ€ê¸°</div>
              </div>
              <div class="stat-box">
                <div class="stat-value green" id="insight-completed">0</div>
                <div class="stat-label">ì™„ë£Œ</div>
              </div>
              <div class="stat-box">
                <div class="stat-value green" id="insight-original">0</div>
                <div class="stat-label">ì›ë³¸ ì‚¬ìš©</div>
              </div>
              <div class="stat-box">
                <div class="stat-value yellow" id="insight-modified">0</div>
                <div class="stat-label">ìˆ˜ì • ë°œì†¡</div>
              </div>
            </div>
            <div class="usage-box">
              <div class="usage-label">ì›ë³¸ ì‚¬ìš©ë¥ </div>
              <div class="usage-value" id="insight-usage">0%</div>
            </div>
          </div>

          <!-- ìì£¼ ë¬»ëŠ” ë¬¸ì˜ -->
          <div class="insight-card blue">
            <h2 class="insight-card-title">ìì£¼ ì‚¬ìš©ëœ í…œí”Œë¦¿ TOP 5</h2>
            <div id="insight-top-templates"></div>
          </div>

          <!-- ìˆ˜ì •ë¥  ë†’ì€ í…œí”Œë¦¿ -->
          <div class="insight-card red">
            <h2 class="insight-card-title">ìˆ˜ì •ë¥  ë†’ì€ í…œí”Œë¦¿</h2>
            <div id="insight-modify-rate"></div>
          </div>
        </div>

        <!-- VOC ë¶„ì„ & ê°œì„  ì œì•ˆ (2í–‰) -->
        <div class="voc-section">
          <div class="insight-card voc-card">
            <h2 class="insight-card-title">ğŸ“Š VOC ë¶„ì„ & ê°œì„  ì œì•ˆ (ì˜ˆì‹œ)</h2>
            <div class="voc-grid" id="voc-analysis">
              <div class="voc-item voc-danger">
                <div class="voc-icon">ğŸ”´</div>
                <div class="voc-content">
                  <div class="voc-title">"ì •ì‚° ì§€ì—°" ë¬¸ì˜ ê¸‰ì¦</div>
                  <div class="voc-stat">+150% (ì´ë²ˆ ì£¼)</div>
                </div>
                <div class="voc-action">â†’ ì •ì‚° ì¼ì • ì‚¬ì „ ì•ˆë‚´ í•„ìš”</div>
              </div>
              <div class="voc-item voc-warning">
                <div class="voc-icon">ğŸŸ¡</div>
                <div class="voc-content">
                  <div class="voc-title">"ì„œë¥˜ ì¬ì—…ë¡œë“œ" í…œí”Œë¦¿ ìˆ˜ì •ë¥  ë†’ìŒ</div>
                  <div class="voc-stat">67% ìˆ˜ì •</div>
                </div>
                <div class="voc-action">â†’ í…œí”Œë¦¿ ë‚´ìš© ê°œì„  í•„ìš”</div>
              </div>
              <div class="voc-item voc-success">
                <div class="voc-icon">ğŸŸ¢</div>
                <div class="voc-content">
                  <div class="voc-title">"ê°„í¸ê²°ì œ ì¶”ê°€" ì›ë³¸ ì‚¬ìš©ë¥  ìš°ìˆ˜</div>
                  <div class="voc-stat">95% ì›ë³¸ ì‚¬ìš©</div>
                </div>
                <div class="voc-action">â†’ í…œí”Œë¦¿ í’ˆì§ˆ ìš°ìˆ˜</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ë¬¸ì˜ ì²˜ë¦¬ íƒ­ -->
    <div class="tab-content" id="tab-inquiry">
      <div class="inquiry-column">
        <!-- 1ì—´: ë¬¸ì˜ ëª©ë¡ -->
        <div class="column">
          <div class="column-header">
            <div class="column-title">ë¬¸ì˜ ëª©ë¡</div>
          </div>
          <div class="status-tabs">
            <button class="status-tab active" onclick="filterInquiry('pending', this)">ëŒ€ê¸° <span id="pendingCount">8</span></button>
            <button class="status-tab" onclick="filterInquiry('completed', this)">ì™„ë£Œ <span id="completedCount">3</span></button>
          </div>
          <div class="column-body" id="inquiryList"></div>
        </div>

        <!-- 2ì—´: ë¬¸ì˜ ìƒì„¸ -->
        <div class="column" style="background: #fff;">
          <div id="inquiryDetail">
            <div class="empty-state">
              <div class="empty-state-icon">ğŸ“¥</div>
              <div class="empty-state-text">ë¬¸ì˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
              <div class="empty-state-hint">ì¢Œì¸¡ ëª©ë¡ì—ì„œ ë¬¸ì˜ë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
            </div>
          </div>
        </div>

        <!-- 3ì—´: ì‘ë‹µ ì‘ì„± -->
        <div class="column response-column" style="background: #f8fafc;">
          <div id="responseArea">
            <div class="empty-state">
              <div class="empty-state-icon">âœï¸</div>
              <div class="empty-state-text">ì‘ë‹µ ì‘ì„±</div>
              <div class="empty-state-hint">ë¬¸ì˜ë¥¼ ì„ íƒí•˜ë©´ í…œí”Œë¦¿ì´ ì¶”ì²œë©ë‹ˆë‹¤</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- í…œí”Œë¦¿ ê´€ë¦¬ íƒ­ -->
    <div class="tab-content" id="tab-template">
      <div class="three-column">
        <!-- 1ì—´: ëŒ€ë¶„ë¥˜ -->
        <div class="column">
          <div class="column-header">
            <div class="column-title">ë¬¸ì˜ ìœ í˜•</div>
          </div>
          <div class="column-body" id="largeCategory"></div>
        </div>

        <!-- 2ì—´: ì¤‘ë¶„ë¥˜ ë˜ëŠ” ì†Œë¶„ë¥˜ -->
        <div class="column">
          <div class="column-header" id="middleHeader">
            <div class="column-title">ìœ í˜• ì„ íƒ</div>
            <div class="column-subtitle">ëŒ€ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
          </div>
          <div class="column-body" id="middleList"></div>
        </div>

        <!-- 3ì—´: í…œí”Œë¦¿ ìƒì„¸ -->
        <div class="column">
          <div id="templateDetail">
            <div class="empty-state">
              <div class="empty-state-icon">ğŸ“„</div>
              <div class="empty-state-text">í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
              <div class="empty-state-hint">ì¢Œì¸¡ì—ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•˜ë©´ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- í…œí”Œë¦¿ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
  <div class="modal-overlay" id="editModal">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-title" id="editModalTitle">í…œí”Œë¦¿ ì¶”ê°€</span>
        <button class="modal-close" onclick="closeEditModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">í…œí”Œë¦¿ ì´ë¦„</label>
          <input type="text" class="form-input" id="editName" placeholder="ì˜ˆ: íšŒì‚¬ëª… ë³€ê²½">
        </div>
        <div class="form-group">
          <label class="form-label">í‚¤ì›Œë“œ</label>
          <input type="text" class="form-input" id="editKeywords" placeholder="ì˜ˆ: íšŒì‚¬ëª…, ìƒí˜¸, ë³€ê²½">
          <p class="form-hint">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”</p>
        </div>
        <div class="form-group">
          <label class="form-label">í…œí”Œë¦¿ ë‚´ìš©</label>
          <textarea class="template-textarea" id="editContent" placeholder="ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜."></textarea>
          <p class="form-hint">{merchantName}ì€ ê°€ë§¹ì ëª…ìœ¼ë¡œ ìë™ ì¹˜í™˜ë©ë‹ˆë‹¤</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeEditModal()">ì·¨ì†Œ</button>
        <button class="btn btn-primary" onclick="saveTemplate()">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
  <div class="modal-overlay" id="deleteModal">
    <div class="modal" style="width: 400px;" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-title">í…œí”Œë¦¿ ì‚­ì œ</span>
        <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="confirm-text">
          <span class="confirm-highlight" id="deleteTemplateName"></span> í…œí”Œë¦¿ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br><br>
          ì‚­ì œëœ í…œí”Œë¦¿ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        </p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeDeleteModal()">ì·¨ì†Œ</button>
        <button class="btn btn-danger" onclick="confirmDelete()">ì‚­ì œ</button>
      </div>
    </div>
  </div>

  <!-- ë³€ìˆ˜ ì˜µì…˜ ì¶”ê°€ ëª¨ë‹¬ -->
  <div class="modal-overlay" id="addVariableModal">
    <div class="modal" style="width: 400px;" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-title">ì˜µì…˜ ì¶”ê°€</span>
        <button class="modal-close" onclick="closeAddVariableModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">ìƒˆ ì˜µì…˜ ì´ë¦„</label>
          <input type="text" class="form-input" id="newVariableInput" placeholder="ì˜ˆ: ë„¤ì´ë²„í˜ì´">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeAddVariableModal()">ì·¨ì†Œ</button>
        <button class="btn btn-primary" onclick="confirmAddVariable()">ì¶”ê°€</button>
      </div>
    </div>
  </div>

  <script>
    // ë°ì´í„° êµ¬ì¡°
    let templateData = {
      change: {
        name: 'ë³€ê²½ê³„ì•½',
        color: 'color-change',
        subCategories: {
          representative: {
            name: 'ìƒí˜¸ëª… ë° ëŒ€í‘œì ë³€ê²½',
            templates: [
              { id: 1, name: 'íšŒì‚¬ëª… ë³€ê²½', keywords: ['íšŒì‚¬ëª…', 'ìƒí˜¸', 'ë³€ê²½'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\níšŒì‚¬ëª… ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦ (ë³€ê²½ëœ íšŒì‚¬ëª… ê¸°ì¬)\n- ë²•ì¸ë“±ê¸°ì‚¬í•­ì „ë¶€ì¦ëª…ì„œ (ë²•ì¸ì¸ ê²½ìš°)\n\nâ–  ì œì¶œ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ë³€ê²½ ë²„íŠ¼ í´ë¦­ í›„ ì„œë¥˜ ì—…ë¡œë“œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 2, name: 'ì‚¬ì—…ì¥ ì£¼ì†Œ ë³€ê²½', keywords: ['ì£¼ì†Œ', 'ì´ì „', 'ì‚¬ì—…ì¥'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì‚¬ì—…ì¥ ì£¼ì†Œ ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦ (ë³€ê²½ëœ ì£¼ì†Œ ê¸°ì¬)\n\nâ–  ì œì¶œ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ë³€ê²½ ë²„íŠ¼ í´ë¦­ í›„ ì„œë¥˜ ì—…ë¡œë“œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 1-2 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 3, name: 'ì—…íƒœ/ì¢…ëª© ë³€ê²½', keywords: ['ì—…íƒœ', 'ì¢…ëª©', 'ì—…ì¢…'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì—…íƒœ/ì¢…ëª© ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦ (ë³€ê²½ëœ ì—…íƒœ/ì¢…ëª© ê¸°ì¬)\n\nâ–  ìœ ì˜ì‚¬í•­\n- ê³ ìœ„í—˜ ì—…ì¢…ìœ¼ë¡œ ë³€ê²½ ì‹œ ì¶”ê°€ ì‹¬ì‚¬ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 4, name: 'í™ˆí˜ì´ì§€ URL ë³€ê²½', keywords: ['í™ˆí˜ì´ì§€', 'URL', 'ì‚¬ì´íŠ¸'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\ní™ˆí˜ì´ì§€ URL ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ë³€ê²½ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > í™ˆí˜ì´ì§€ URL ìˆ˜ì •\n\nâ–  ìœ ì˜ì‚¬í•­\n- ë³€ê²½ëœ URLì—ì„œ ì‹¤ì œ ì„œë¹„ìŠ¤ê°€ ìš´ì˜ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 1-2 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 5, name: 'ì—°ë½ì²˜ ë³€ê²½', keywords: ['ì—°ë½ì²˜', 'ì „í™”ë²ˆí˜¸', 'í•¸ë“œí°'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì—°ë½ì²˜ ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ë³€ê²½ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ì—°ë½ì²˜ ìˆ˜ì •\n\në³„ë„ ì‹¬ì‚¬ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 6, name: 'ëŒ€í‘œì ì •ë³´ ë³€ê²½', keywords: ['ëŒ€í‘œì', 'ëŒ€í‘œ', 'ë³€ê²½'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nëŒ€í‘œì ì •ë³´ ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜ (ìµœê·¼ 3ê°œì›” ì´ë‚´ ë°œê¸‰)\n- ë²•ì¸ë“±ê¸°ì‚¬í•­ì „ë¶€ì¦ëª…ì„œ\n- ë²•ì¸ì¸ê°ì¦ëª…ì„œ\n- ì‹ ê·œ ëŒ€í‘œì ì‹ ë¶„ì¦ ì‚¬ë³¸\n\nâ–  ì œì¶œ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ë³€ê²½ ë²„íŠ¼ í´ë¦­ í›„ ì„œë¥˜ ì—…ë¡œë“œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nìê¸ˆì„¸íƒë°©ì§€(AML) í™•ì¸ì´ í•„ìš”í•˜ì—¬ ì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          }
        }
      },
      add: {
        name: 'ì¶”ê°€/ë³€ê²½ê³„ì•½',
        color: 'color-add',
        subCategories: {
          payment: {
            name: 'ê²°ì œìˆ˜ë‹¨',
            templates: [
              { id: 7, name: 'ê¸°ë³¸ ê²°ì œ íŒ¨í‚¤ì§€ ì¶”ê°€', keywords: ['ê¸°ë³¸', 'ê²°ì œ', 'íŒ¨í‚¤ì§€'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nê¸°ë³¸ ê²°ì œ íŒ¨í‚¤ì§€ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í¬í•¨ ê²°ì œìˆ˜ë‹¨\n- ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°€ìƒê³„ì¢Œ\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ê¸°ë³¸ ê²°ì œ íŒ¨í‚¤ì§€ ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 8, name: 'ë¸Œëœë“œí˜ì´ ì¶”ê°€', keywords: ['ë¸Œëœë“œí˜ì´', 'ë¸Œëœë“œ'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\në¸Œëœë“œí˜ì´ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ë¸Œëœë“œí˜ì´ë€?\n- ê°€ë§¹ì  ìì²´ ê°„í¸ê²°ì œ ì„œë¹„ìŠ¤ êµ¬ì¶•\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ë¸Œëœë“œí˜ì´ ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nê¸°ìˆ  ê²€í†  í¬í•¨ 5-7 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 9, name: 'ë¹Œë§(ì •ê¸°ê²°ì œ) ì¶”ê°€', keywords: ['ë¹Œë§', 'ì •ê¸°ê²°ì œ', 'êµ¬ë…'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\në¹Œë§(ì •ê¸°ê²°ì œ) ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ë¹Œë§ì´ë€?\n- êµ¬ë…í˜• ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ìë™ ê²°ì œ\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ë¹Œë§ ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 10, name: 'í•´ì™¸ ê²°ì œ ì¶”ê°€', keywords: ['í•´ì™¸', 'ì™¸êµ­', 'ê¸€ë¡œë²Œ'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\ní•´ì™¸ ê²°ì œ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì§€ì› ê²°ì œìˆ˜ë‹¨\n- í•´ì™¸ ì‹ ìš©ì¹´ë“œ (VISA, MasterCard ë“±)\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 3-5 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 11, name: 'ì§€ê¸‰ëŒ€í–‰ ì¶”ê°€', keywords: ['ì§€ê¸‰ëŒ€í–‰', 'ì •ì‚°'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì§€ê¸‰ëŒ€í–‰ ì„œë¹„ìŠ¤ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì§€ê¸‰ëŒ€í–‰ì´ë€?\n- í”Œë«í¼ ì‚¬ì—…ìë¥¼ ìœ„í•œ ì…€ëŸ¬ ì •ì‚° ì„œë¹„ìŠ¤\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦\n- í”Œë«í¼ ì„œë¹„ìŠ¤ ì†Œê°œì„œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 5-7 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          },
          simple: {
            name: 'ê°„í¸ê²°ì œ',
            hasVariable: true,
            variableName: 'ê°„í¸ê²°ì œëª…',
            variableOptions: ['SSGí˜ì´', 'í˜ì´ì½”', 'Lpay', 'ì¹´ì¹´ì˜¤í˜ì´', 'í† ìŠ¤í˜ì´', 'ì• í”Œí˜ì´', 'ì‚¼ì„±í˜ì´', 'ë„¤ì´ë²„í˜ì´'],
            templates: [
              { 
                id: 12, 
                name: 'ê°„í¸ê²°ì œ ì¶”ê°€', 
                keywords: ['ê°„í¸ê²°ì œ', 'í˜ì´', 'ì¶”ê°€'], 
                content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\n{ê°„í¸ê²°ì œëª…} ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ê°„í¸ê²°ì œ > {ê°„í¸ê²°ì œëª…} ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
                variable: 'ê°„í¸ê²°ì œëª…'
              },
            ]
          },
          mid: {
            name: 'ìƒì ì•„ì´ë””(MID)',
            templates: [
              { id: 13, name: 'MID ì¶”ê°€', keywords: ['MID', 'ì•„ì´ë””', 'ì¶”ê°€'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nMID ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nsupport@tosspayments.com ìœ¼ë¡œ ë©”ì¼ ë¬¸ì˜\n\nâ–  ìœ ì˜ì‚¬í•­\n- ìƒì ì•„ì´ë””ëŠ” ì´ 14ì ì´ë‚´ë¡œ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ë™ì¼ ì‚¬ì—…ì ë‚´ì—ì„œë§Œ MID ì¶”ê°€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 14, name: 'MID ë³€ê²½', keywords: ['MID', 'ì•„ì´ë””', 'ë³€ê²½'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nMID ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nsupport@tosspayments.com ìœ¼ë¡œ ë©”ì¼ ë¬¸ì˜\n\nâ–  í•„ìš” ì •ë³´\n- ê¸°ì¡´ MID\n- ë³€ê²½ í¬ë§ MID (14ì ì´ë‚´)\n- ë³€ê²½ ì‚¬ìœ \n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 15, name: 'MID í•´ì§€', keywords: ['MID', 'ì•„ì´ë””', 'í•´ì§€'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nMID í•´ì§€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nsupport@tosspayments.com ìœ¼ë¡œ ë©”ì¼ ë¬¸ì˜\n\nâ–  í•„ìš” ì •ë³´\n- í•´ì§€ í¬ë§ MID\n- í•´ì§€ ì‚¬ìœ \n- í•´ì§€ í¬ë§ì¼\n\nâ–  ìœ ì˜ì‚¬í•­\n- ë¯¸ì •ì‚° ê±´ì´ ìˆëŠ” ê²½ìš° ì •ì‚° ì™„ë£Œ í›„ í•´ì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          }
        }
      },
      service: {
        name: 'ì„œë¹„ìŠ¤ë¬¸ì˜',
        color: 'color-service',
        subCategories: {
          contract: {
            name: 'ê³„ì•½',
            templates: [
              { id: 16, name: 'í•´ì™¸ê²°ì œ ê°€ìƒê³„ì¢Œ/ê³„ì¢Œì´ì²´ ê°€ëŠ¥ ì—¬ë¶€', keywords: ['í•´ì™¸', 'ê°€ìƒê³„ì¢Œ', 'ê³„ì¢Œì´ì²´'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\ní•´ì™¸ê²°ì œ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\ní˜„ì¬ í•´ì™¸ê²°ì œëŠ” ì¹´ë“œê²°ì œë§Œ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\ní•´ì™¸ ê±°ì£¼ë¥¼ í•˜ë©´ì„œ í•œêµ­ ê³„ì¢Œë¡œ ê²°ì œí•˜ëŠ” ê²ƒì€ ê°€ëŠ¥í•˜ë‚˜, í•´ì™¸ ê³„ì¢Œë¡œ ê³„ì¢Œì´ì²´ ê²°ì œëŠ” ë¶ˆê°€í•©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 17, name: 'ì „ìê³„ì•½ ì™¸ ì„œë©´ê³„ì•½ ê°€ëŠ¥ ì—¬ë¶€', keywords: ['ì„œë©´ê³„ì•½', 'ì „ìê³„ì•½'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì„œë©´ê³„ì•½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì „ìê³„ì•½ì´ ì–´ë ¤ìš°ì‹  ê²½ìš° ê³ ê°ì„¼í„°(1544-7772)ë¡œ ë¬¸ì˜ì£¼ì‹œë©´ ì„œë©´ê³„ì•½ì„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 18, name: 'ì‚¬ì—…ì ìƒì´ ì‹œ MID ì¶”ê°€ ê°€ëŠ¥ ì—¬ë¶€', keywords: ['ì‚¬ì—…ì', 'ìƒì´', 'MID'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì‚¬ì—…ì ìƒì´ ì‹œ MID ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì‚¬ì—…ìê°€ ìƒì´í•œ ê²½ìš° MID ì¶”ê°€ëŠ” ë¶ˆê°€í•˜ë©°, ì‹ ê·œê³„ì•½ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\nì‹ ê·œê³„ì•½ ì§„í–‰ì„ ì›í•˜ì‹œë©´ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 19, name: 'ì„œë¥˜ ì˜ëª» ì—…ë¡œë“œ ì‹œ ìˆ˜ì • ë°©ë²•', keywords: ['ì„œë¥˜', 'ì˜ëª»', 'ìˆ˜ì •'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì„œë¥˜ ìˆ˜ì • ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì„œë¥˜ ë¯¸ë¹„ì‚¬í•­ì´ ìˆëŠ” ê²½ìš°, ê³„ì•½íŒ€ì—ì„œ ì‹¬ì‚¬ ì´í›„ ë¯¸ë¹„ì‚¬í•­ì„ ì•Œë¦¼í†¡ìœ¼ë¡œ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.\n\nì•ˆë‚´ë¥¼ í™•ì¸í•˜ì‹œê³  ì„œë¥˜ë¥¼ ìƒˆë¡­ê²Œ ì¤€ë¹„í•´ì£¼ì„¸ìš”.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 20, name: 'íšŒì‚¬ ì •ë³´ ë³€ê²½ ì‹œ í•„ìš” ì„œë¥˜', keywords: ['íšŒì‚¬', 'ì •ë³´', 'ë³€ê²½', 'ì„œë¥˜'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\níšŒì‚¬ ì •ë³´ ë³€ê²½ ì‹œ í•„ìš” ì„œë¥˜ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\në³€ê²½í•  ì •ë³´ì— ë”°ë¼ ì„œë¥˜ ì²¨ë¶€ê°€ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë©°, ì‹¬ì‚¬ì— 2~3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 21, name: '3ê°œì›” ì´ë‚´ ë°œê¸‰ë³¸ í•„ìˆ˜ ì—¬ë¶€', keywords: ['3ê°œì›”', 'ë°œê¸‰', 'ì„œë¥˜'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì„œë¥˜ ë°œê¸‰ì¼ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\n3ê°œì›” ì´ë‚´ ë°œê¸‰ë³¸ì´ ì•„ë‹Œ ì„œë¥˜ëŠ” ì ‘ìˆ˜ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤.\n\n3ê°œì›” ì´ë‚´ ìµœì‹  ë°œê¸‰ë³¸ì„ ì¤€ë¹„í•´ì£¼ì„¸ìš”.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          },
          settlement: {
            name: 'ì •ì‚°',
            templates: [
              { id: 23, name: 'ì •ì‚° ì§€ì—° ë¬¸ì˜', keywords: ['ì •ì‚°', 'ì§€ì—°', 'ì•ˆë“¤ì–´'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ì§€ì—° ê´€ë ¨ í™•ì¸ë“œë¦½ë‹ˆë‹¤.\n\ní˜„ì¬ í™•ì¸ ì¤‘ì´ë©°, í™•ì¸ ì™„ë£Œ í›„ ë³„ë„ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 24, name: 'ì •ì‚° ê¸ˆì•¡ ì´ìƒ ë¬¸ì˜', keywords: ['ì •ì‚°', 'ê¸ˆì•¡', 'ì´ìƒ'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ê¸ˆì•¡ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì •ì‚° ê¸ˆì•¡ì€ ê²°ì œ ê¸ˆì•¡ì—ì„œ ìˆ˜ìˆ˜ë£Œì™€ ì·¨ì†Œ ê±´ì´ ì°¨ê°ëœ ê¸ˆì•¡ì…ë‹ˆë‹¤.\n\nâ–  í™•ì¸ ë°©ë²•\nìƒì ê´€ë¦¬ì > ì •ì‚° > ì •ì‚°ë‚´ì—­ ì¡°íšŒ\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 25, name: 'ì •ì‚° ë³´ë¥˜ ì‚¬ìœ  í™•ì¸', keywords: ['ì •ì‚°', 'ë³´ë¥˜', 'ì‚¬ìœ '], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ë³´ë¥˜ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ ë³´ë¥˜ ì‚¬ìœ :\n- ì •ì‚°í•œë„ ì´ˆê³¼\n- ì„œë¥˜ ë¯¸ë¹„\n- ë¦¬ìŠ¤í¬ ê²€í†  ì¤‘\n\nâ–  í™•ì¸ ë°©ë²•\nìƒì ê´€ë¦¬ì > ì •ì‚° > ì •ì‚°í˜„í™©\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 26, name: 'ì •ì‚° ë‚´ì—­ í™•ì¸ ë°©ë²•', keywords: ['ì •ì‚°', 'ë‚´ì—­', 'í™•ì¸'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ë‚´ì—­ í™•ì¸ ë°©ë²• ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í™•ì¸ ê²½ë¡œ\nìƒì ê´€ë¦¬ì > ì •ì‚° > ì •ì‚°ë‚´ì—­ ì¡°íšŒ\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          },
          fee: {
            name: 'ìˆ˜ìˆ˜ë£Œ',
            templates: [
              { id: 27, name: 'ìˆ˜ìˆ˜ë£Œ í™•ì¸ ë°©ë²•', keywords: ['ìˆ˜ìˆ˜ë£Œ', 'í™•ì¸'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nìˆ˜ìˆ˜ë£Œ í™•ì¸ ë°©ë²• ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í™•ì¸ ê²½ë¡œ\nìƒì ê´€ë¦¬ì > ì´ìš©ì •ë³´ > í•´ë‹¹ MID ì„¤ì • > ìˆ˜ìˆ˜ë£Œ íƒ­\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 28, name: 'ìˆ˜ìˆ˜ë£Œìœ¨ ë³€ê²½ ìš”ì²­', keywords: ['ìˆ˜ìˆ˜ë£Œ', 'ë³€ê²½', 'ì¸í•˜'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nìˆ˜ìˆ˜ë£Œìœ¨ ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nìˆ˜ìˆ˜ë£Œìœ¨ ë³€ê²½ì€ ì˜ì—… ë‹´ë‹¹ìë¥¼ í†µí•´ í˜‘ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\në‹´ë‹¹ ì˜ì—…íŒ€ì— ì—°ê²°í•´ë“œë¦´ê¹Œìš”?\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 29, name: 'ìˆ˜ìˆ˜ë£Œ ê³„ì‚° ë°©ë²•', keywords: ['ìˆ˜ìˆ˜ë£Œ', 'ê³„ì‚°'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nìˆ˜ìˆ˜ë£Œ ê³„ì‚° ë°©ë²• ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ê³„ì‚° ê³µì‹\nìˆ˜ìˆ˜ë£Œ = ê²°ì œê¸ˆì•¡ Ã— ìˆ˜ìˆ˜ë£Œìœ¨\nì •ì‚°ê¸ˆì•¡ = ê²°ì œê¸ˆì•¡ - ìˆ˜ìˆ˜ë£Œ - ì·¨ì†Œê¸ˆì•¡\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          },
          tech: {
            name: 'ê¸°ìˆ ',
            templates: [
              { id: 30, name: 'ê²°ì œ ì˜¤ë¥˜ ë¬¸ì˜', keywords: ['ê²°ì œ', 'ì˜¤ë¥˜', 'ì‹¤íŒ¨'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nê²°ì œ ì˜¤ë¥˜ ê´€ë ¨ í™•ì¸ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í™•ì¸ í•„ìš” ì •ë³´\n- ì˜¤ë¥˜ ë°œìƒ ì¼ì‹œ\n- ì˜¤ë¥˜ ë©”ì‹œì§€\n- ê²°ì œ ìˆ˜ë‹¨\n\nìœ„ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ê¸°ìˆ íŒ€ì—ì„œ í™•ì¸ í›„ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 31, name: 'ì·¨ì†Œ/í™˜ë¶ˆ ì˜¤ë¥˜ ë¬¸ì˜', keywords: ['ì·¨ì†Œ', 'í™˜ë¶ˆ', 'ì˜¤ë¥˜'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nì·¨ì†Œ/í™˜ë¶ˆ ì˜¤ë¥˜ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ ì˜¤ë¥˜ ì›ì¸:\n- ë¶€ë¶„ ì·¨ì†Œ ë¶ˆê°€ ê²°ì œ ìˆ˜ë‹¨\n- ì·¨ì†Œ ê°€ëŠ¥ ê¸°ê°„ ì´ˆê³¼\n- ì´ë¯¸ ì·¨ì†Œëœ ê±°ë˜\n\nê±°ë˜ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ í™•ì¸ í›„ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 32, name: 'API ì—°ë™ ë¬¸ì˜', keywords: ['API', 'ì—°ë™', 'ê°œë°œ'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\nAPI ì—°ë™ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ê°œë°œ ë¬¸ì„œ\nhttps://docs.tosspayments.com\n\nâ–  ê¸°ìˆ  ì§€ì›\nsupport@tosspayments.com\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
              { id: 33, name: 'í…ŒìŠ¤íŠ¸ í™˜ê²½ ë¬¸ì˜', keywords: ['í…ŒìŠ¤íŠ¸', 'ìƒŒë“œë°•ìŠ¤'], content: 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\ní…ŒìŠ¤íŠ¸ í™˜ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í…ŒìŠ¤íŠ¸ API í‚¤\nìƒì ê´€ë¦¬ì > ê°œë°œì •ë³´ > í…ŒìŠ¤íŠ¸ API í‚¤ í™•ì¸\n\nâ–  í…ŒìŠ¤íŠ¸ ì¹´ë“œë²ˆí˜¸\ndocs.tosspayments.com ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.' },
            ]
          }
        }
      }
    };

    // ìƒíƒœ ê´€ë¦¬
    let currentTab = 'insight';
    let selectedLargeCategory = null;
    let selectedMediumCategory = null;
    let selectedTemplate = null;
    let selectedVariableOption = null;
    let viewMode = 'medium'; // 'medium' or 'template'
    let editMode = null;
    let deleteTargetId = null;
    let nextId = 34;
    let isEditing = false;
    // ë¬¸ì˜ ì²˜ë¦¬ ìƒíƒœ
    let currentInquiryStatus = 'pending';
    let selectedInquiry = null;
    let originalTemplate = '';

    // ë¬¸ì˜ ë°ì´í„°
    let inquiries = [
      { id: 1, merchant: '(ì£¼)ì»¤ë¨¸ìŠ¤ì½”ë¦¬ì•„', content: 'ì„œë¥˜ë¥¼ ì˜ëª» ì˜¬ë ¸ëŠ”ë° ì–´ë–»ê²Œ ìˆ˜ì •í•˜ë‚˜ìš”?', date: '12-15 14:30', status: 'pending' },
      { id: 2, merchant: 'ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´', content: 'ì •ì‚°ì´ ì•„ì§ ì•ˆ ë“¤ì–´ì™”ì–´ìš”. í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.', date: '12-15 13:20', status: 'pending' },
      { id: 3, merchant: '(ì£¼)í…Œí¬ì†”ë£¨ì…˜', content: 'ì¹´ì¹´ì˜¤í˜ì´ ì¶”ê°€í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤', date: '12-15 11:45', status: 'pending' },
      { id: 4, merchant: 'ì˜¨ë¼ì¸ë§ˆì¼“', content: 'ëŒ€í‘œìê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜ìš”?', date: '12-15 10:30', status: 'pending' },
      { id: 5, merchant: '(ì£¼)ê¸€ë¡œë²ŒíŠ¸ë ˆì´ë“œ', content: 'ìˆ˜ìˆ˜ë£Œ í™•ì¸ì€ ì–´ë””ì„œ í•˜ë‚˜ìš”?', date: '12-14 17:20', status: 'pending' },
      { id: 6, merchant: 'íŒ¨ì…˜ëª°', content: 'MID ì¶”ê°€ ìš”ì²­ë“œë¦½ë‹ˆë‹¤', date: '12-14 15:10', status: 'pending' },
      { id: 7, merchant: '(ì£¼)í‘¸ë“œí…Œí¬', content: 'ì‹¬ì‚¬ê°€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?', date: '12-14 14:00', status: 'pending' },
      { id: 8, merchant: 'ë¦¬ë¹™í”ŒëŸ¬ìŠ¤', content: 'ì •ê¸°ê²°ì œ ê¸°ëŠ¥ ì¶”ê°€í•˜ë ¤ê³ ìš”', date: '12-14 11:30', status: 'pending' },
    ];

    let completedInquiries = [
      { 
        id: 101, merchant: '(ì£¼)ì´ì»¤ë¨¸ìŠ¤', content: 'í† ìŠ¤í˜ì´ ì¶”ê°€ ë¬¸ì˜', date: '12-13', status: 'completed', wasModified: false,
        templateUsed: 'ê°„í¸ê²°ì œ ì¶”ê°€',
        originalContent: 'ì•ˆë…•í•˜ì„¸ìš”, (ì£¼)ì´ì»¤ë¨¸ìŠ¤ ë‹´ë‹¹ìë‹˜.\n\ní† ìŠ¤í˜ì´ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ê°„í¸ê²°ì œ > í† ìŠ¤í˜ì´ ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        finalContent: 'ì•ˆë…•í•˜ì„¸ìš”, (ì£¼)ì´ì»¤ë¨¸ìŠ¤ ë‹´ë‹¹ìë‹˜.\n\ní† ìŠ¤í˜ì´ ì¶”ê°€ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  ì‹ ì²­ ë°©ë²•\nìƒì ê´€ë¦¬ì > ê²°ì œìˆ˜ë‹¨ > ê°„í¸ê²°ì œ > í† ìŠ¤í˜ì´ ì‹ ì²­\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        modifyReason: ''
      },
      { 
        id: 102, merchant: 'ë² ìŠ¤íŠ¸ì…€ëŸ¬', content: 'ì •ì‚° ì§€ì—° ë¬¸ì˜', date: '12-13', status: 'completed', wasModified: true,
        templateUsed: 'ì •ì‚° ì§€ì—° ë¬¸ì˜',
        originalContent: 'ì•ˆë…•í•˜ì„¸ìš”, ë² ìŠ¤íŠ¸ì…€ëŸ¬ ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ì§€ì—° ê´€ë ¨ í™•ì¸ë“œë¦½ë‹ˆë‹¤.\n\ní˜„ì¬ í™•ì¸ ì¤‘ì´ë©°, í™•ì¸ ì™„ë£Œ í›„ ë³„ë„ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        finalContent: 'ì•ˆë…•í•˜ì„¸ìš”, ë² ìŠ¤íŠ¸ì…€ëŸ¬ ë‹´ë‹¹ìë‹˜.\n\nì •ì‚° ì§€ì—° ê´€ë ¨ í™•ì¸ë“œë¦½ë‹ˆë‹¤.\n\ní™•ì¸ ê²°ê³¼, ì •ì‚°í•œë„ ì´ˆê³¼ë¡œ ì¸í•´ ë³´ë¥˜ ì¤‘ì…ë‹ˆë‹¤.\n\nâ–  í•´ê²° ë°©ë²•\n- ìµœê·¼ 3ê°œì›” ë§¤ì¶œ ì¦ë¹™\n- ì‚¬ì—…ì í†µì¥ ì‚¬ë³¸\n\nì„œë¥˜ ì œì¶œ í›„ 1-2 ì˜ì—…ì¼ ë‚´ ì •ì‚° ì¬ê°œë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        modifyReason: 'ì •ì‚°í•œë„ ì´ˆê³¼ ê´€ë ¨ êµ¬ì²´ì  í•´ê²° ë°©ë²• ì¶”ê°€'
      },
      { 
        id: 103, merchant: '(ì£¼)ë””ì§€í„¸í—ˆë¸Œ', content: 'íšŒì‚¬ëª… ë³€ê²½', date: '12-12', status: 'completed', wasModified: false,
        templateUsed: 'íšŒì‚¬ëª… ë³€ê²½',
        originalContent: 'ì•ˆë…•í•˜ì„¸ìš”, (ì£¼)ë””ì§€í„¸í—ˆë¸Œ ë‹´ë‹¹ìë‹˜.\n\níšŒì‚¬ëª… ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦ (ë³€ê²½ëœ íšŒì‚¬ëª… ê¸°ì¬)\n- ë²•ì¸ë“±ê¸°ì‚¬í•­ì „ë¶€ì¦ëª…ì„œ (ë²•ì¸ì¸ ê²½ìš°)\n\nâ–  ì œì¶œ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ë³€ê²½ ë²„íŠ¼ í´ë¦­ í›„ ì„œë¥˜ ì—…ë¡œë“œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        finalContent: 'ì•ˆë…•í•˜ì„¸ìš”, (ì£¼)ë””ì§€í„¸í—ˆë¸Œ ë‹´ë‹¹ìë‹˜.\n\níšŒì‚¬ëª… ë³€ê²½ ê´€ë ¨ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.\n\nâ–  í•„ìš” ì„œë¥˜\n- ì‚¬ì—…ìë“±ë¡ì¦ (ë³€ê²½ëœ íšŒì‚¬ëª… ê¸°ì¬)\n- ë²•ì¸ë“±ê¸°ì‚¬í•­ì „ë¶€ì¦ëª…ì„œ (ë²•ì¸ì¸ ê²½ìš°)\n\nâ–  ì œì¶œ ë°©ë²•\nìƒì ê´€ë¦¬ì > íšŒì‚¬ì •ë³´ > ë³€ê²½ ë²„íŠ¼ í´ë¦­ í›„ ì„œë¥˜ ì—…ë¡œë“œ\n\nâ–  ì²˜ë¦¬ ê¸°ê°„\nì‹¬ì‚¬ì— 2-3 ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.',
        modifyReason: ''
      },
    ];

    // ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      renderLargeCategories();
      renderMiddleColumn();
      renderInquiryList();
      renderInsight();
    });

    // ==================== ì¸ì‚¬ì´íŠ¸ ====================
    function renderInsight() {
      // ì²˜ë¦¬ í˜„í™©
      const pending = inquiries.length;
      const completed = completedInquiries.length;
      const original = completedInquiries.filter(inq => !inq.wasModified).length;
      const modified = completedInquiries.filter(inq => inq.wasModified).length;
      
      document.getElementById('insight-pending').textContent = pending;
      document.getElementById('insight-completed').textContent = completed;
      document.getElementById('insight-original').textContent = original;
      document.getElementById('insight-modified').textContent = modified;
      
      // ì›ë³¸ ì‚¬ìš©ë¥ 
      const usageRate = completed > 0 ? Math.round((original / completed) * 100) : 0;
      document.getElementById('insight-usage').textContent = usageRate + '%';
      
      // ìì£¼ ì‚¬ìš©ëœ í…œí”Œë¦¿ TOP 5
      const templateCount = {};
      completedInquiries.forEach(inq => {
        if (inq.templateUsed && inq.templateUsed !== 'ì§ì ‘ ì‘ì„±') {
          templateCount[inq.templateUsed] = (templateCount[inq.templateUsed] || 0) + 1;
        }
      });
      
      const topTemplates = Object.entries(templateCount)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 5);
      
      const topContainer = document.getElementById('insight-top-templates');
      if (topTemplates.length === 0) {
        topContainer.innerHTML = '<div class="empty-insight">ì•„ì§ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
      } else {
        topContainer.innerHTML = topTemplates.map(([name, count], idx) => `
          <div class="rank-item">
            <span class="rank-num">${idx + 1}</span>
            <div class="rank-info">
              <div class="rank-name">${name}</div>
            </div>
            <span class="rank-value">${count}ê±´</span>
          </div>
        `).join('');
      }
      
      // ìˆ˜ì •ë¥  ë†’ì€ í…œí”Œë¦¿
      const templateStats = {};
      completedInquiries.forEach(inq => {
        if (inq.templateUsed && inq.templateUsed !== 'ì§ì ‘ ì‘ì„±') {
          if (!templateStats[inq.templateUsed]) {
            templateStats[inq.templateUsed] = { total: 0, modified: 0 };
          }
          templateStats[inq.templateUsed].total++;
          if (inq.wasModified) {
            templateStats[inq.templateUsed].modified++;
          }
        }
      });
      
      const modifyRates = Object.entries(templateStats)
        .map(([name, stats]) => ({
          name,
          total: stats.total,
          modified: stats.modified,
          rate: Math.round((stats.modified / stats.total) * 100)
        }))
        .filter(item => item.modified > 0)
        .sort((a, b) => b.rate - a.rate)
        .slice(0, 5);
      
      const modifyContainer = document.getElementById('insight-modify-rate');
      if (modifyRates.length === 0) {
        modifyContainer.innerHTML = '<div class="empty-insight">ìˆ˜ì •ëœ ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤</div>';
      } else {
        modifyContainer.innerHTML = modifyRates.map((item, idx) => `
          <div class="rank-item improve-item">
            <span class="rank-num">${idx + 1}</span>
            <div class="rank-info">
              <div class="rank-name">${item.name}</div>
              <div class="rank-sub">${item.total}ê±´ ì¤‘ ${item.modified}ê±´ ìˆ˜ì •</div>
            </div>
            <span class="rank-value">${item.rate}%</span>
          </div>
        `).join('');
      }
    }

    // íƒ­ ì „í™˜
    function switchTab(tab) {
      currentTab = tab;
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById('tab-' + tab).classList.add('active');
    }

    // 1ì—´: ëŒ€ë¶„ë¥˜ ë Œë”ë§
    function renderLargeCategories() {
      const container = document.getElementById('largeCategory');
      
      container.innerHTML = Object.entries(templateData).map(([key, cat]) => `
        <div class="category-item ${selectedLargeCategory === key ? 'active' : ''}" onclick="selectLargeCategory('${key}')">
          <span class="category-dot ${cat.color}"></span>
          <span class="category-name">${cat.name}</span>
          <span class="category-arrow">â–¶</span>
        </div>
      `).join('');
    }

    // ëŒ€ë¶„ë¥˜ ì„ íƒ
    function selectLargeCategory(key) {
      selectedLargeCategory = key;
      selectedMediumCategory = null;
      selectedTemplate = null;
      selectedVariableOption = null;
      viewMode = 'medium';
      isEditing = false;
      
      renderLargeCategories();
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // 2ì—´: ì¤‘ê°„ ì»¬ëŸ¼ ë Œë”ë§ (ì¤‘ë¶„ë¥˜ ë˜ëŠ” ì†Œë¶„ë¥˜)
    function renderMiddleColumn() {
      const header = document.getElementById('middleHeader');
      const list = document.getElementById('middleList');

      if (!selectedLargeCategory) {
        header.innerHTML = `
          <div class="column-title">ìœ í˜• ì„ íƒ</div>
          <div class="column-subtitle">ëŒ€ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
        `;
        list.innerHTML = `
          <div class="empty-state" style="height: auto; padding: 60px 20px;">
            <div class="empty-state-text">ëŒ€ë¶„ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
          </div>
        `;
        return;
      }

      const largeCat = templateData[selectedLargeCategory];

      if (viewMode === 'medium') {
        // ì¤‘ë¶„ë¥˜ ëª©ë¡ í‘œì‹œ
        header.innerHTML = `
          <div class="column-title">${largeCat.name}</div>
          <div class="column-subtitle">${Object.keys(largeCat.subCategories).length}ê°œì˜ í•˜ìœ„ ìœ í˜•</div>
        `;

        list.innerHTML = Object.entries(largeCat.subCategories).map(([key, subCat]) => `
          <div class="list-item" onclick="selectMediumCategory('${key}')">
            <div class="list-item-content">
              <div class="list-item-title">${subCat.name}</div>
              <div class="list-item-sub">${subCat.templates.length}ê°œì˜ í…œí”Œë¦¿</div>
            </div>
            <span class="list-item-arrow">â–¶</span>
          </div>
        `).join('');

      } else {
        // ì†Œë¶„ë¥˜(í…œí”Œë¦¿) ëª©ë¡ í‘œì‹œ
        const mediumCat = largeCat.subCategories[selectedMediumCategory];

        header.innerHTML = `
          <div class="column-header-with-back">
            <button class="back-btn" onclick="goBackToMedium()">â† ì´ì „</button>
            <div>
              <div class="column-title">${mediumCat.name}</div>
              <div class="column-subtitle">${mediumCat.templates.length}ê°œì˜ í…œí”Œë¦¿</div>
            </div>
          </div>
        `;

        list.innerHTML = `
          ${mediumCat.templates.map(t => `
            <div class="list-item ${selectedTemplate?.id === t.id ? 'active' : ''}" onclick="selectTemplate(${t.id})">
              <div class="list-item-content">
                <div class="list-item-title">${t.name}</div>
                <div class="list-item-sub">${t.keywords.join(', ')}</div>
              </div>
              <div class="list-item-actions">
                <button class="btn-icon" onclick="openEditModal(${t.id}); event.stopPropagation();" title="ìˆ˜ì •">âœï¸</button>
                <button class="btn-icon danger" onclick="openDeleteModal(${t.id}); event.stopPropagation();" title="ì‚­ì œ">ğŸ—‘ï¸</button>
              </div>
            </div>
          `).join('')}
          <button class="add-btn" onclick="openAddModal()">+ ìƒˆ í…œí”Œë¦¿ ì¶”ê°€</button>
        `;
      }
    }

    // ì¤‘ë¶„ë¥˜ ì„ íƒ â†’ ì†Œë¶„ë¥˜ë¡œ ì „í™˜
    function selectMediumCategory(key) {
      selectedMediumCategory = key;
      selectedTemplate = null;
      selectedVariableOption = null;
      viewMode = 'template';
      isEditing = false;
      
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // ì´ì „ìœ¼ë¡œ (ì†Œë¶„ë¥˜ â†’ ì¤‘ë¶„ë¥˜)
    function goBackToMedium() {
      selectedMediumCategory = null;
      selectedTemplate = null;
      selectedVariableOption = null;
      viewMode = 'medium';
      isEditing = false;
      
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // í…œí”Œë¦¿ ì„ íƒ
    function selectTemplate(id) {
      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;
      selectedTemplate = templates.find(t => t.id === id);
      selectedVariableOption = null;
      isEditing = false;
      
      // ë³€ìˆ˜ ì˜µì…˜ì´ ìˆìœ¼ë©´ ì²« ë²ˆì§¸ ì„ íƒ
      const mediumCat = templateData[selectedLargeCategory].subCategories[selectedMediumCategory];
      if (mediumCat.hasVariable && mediumCat.variableOptions.length > 0) {
        selectedVariableOption = mediumCat.variableOptions[0];
      }
      
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // 3ì—´: í…œí”Œë¦¿ ìƒì„¸ ë Œë”ë§
    function renderTemplateDetail() {
      const container = document.getElementById('templateDetail');
      
      if (!selectedTemplate) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“„</div>
            <div class="empty-state-text">í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
            <div class="empty-state-hint">ì¢Œì¸¡ì—ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•˜ë©´ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
          </div>
        `;
        return;
      }

      const mediumCat = templateData[selectedLargeCategory].subCategories[selectedMediumCategory];
      const hasVariable = mediumCat.hasVariable && selectedTemplate.variable;

      // ë³€ìˆ˜ ì¹˜í™˜ëœ ë‚´ìš©
      let displayContent = selectedTemplate.content;
      if (hasVariable && selectedVariableOption) {
        displayContent = displayContent.replace(new RegExp(`{${selectedTemplate.variable}}`, 'g'), selectedVariableOption);
      }

      container.innerHTML = `
        <div class="detail-container">
          <div class="detail-header">
            <div>
              <div class="detail-title">${selectedTemplate.name}</div>
              <div class="detail-meta">í‚¤ì›Œë“œ: ${selectedTemplate.keywords.join(', ')}</div>
            </div>
            <div class="detail-actions">
              <button class="btn btn-secondary" onclick="toggleEdit()">
                ${isEditing ? 'ì·¨ì†Œ' : 'ìˆ˜ì •'}
              </button>
              ${isEditing ? `<button class="btn btn-primary" onclick="saveInlineEdit()">ì €ì¥</button>` : ''}
            </div>
          </div>

          ${hasVariable ? `
            <div class="variable-section">
              <div class="variable-label">ğŸ“Œ ${mediumCat.variableName} ì„ íƒ</div>
              <div class="variable-options">
                ${mediumCat.variableOptions.map(opt => `
                  <button class="variable-option ${selectedVariableOption === opt ? 'active' : ''}" onclick="selectVariableOption('${opt}')">
                    ${opt}
                  </button>
                `).join('')}
                <button class="variable-add" onclick="openAddVariableModal()">+ ì¶”ê°€</button>
              </div>
            </div>
          ` : ''}

          <div class="template-content-section">
            <div class="template-content-header">
              <div class="template-content-label">í…œí”Œë¦¿ ë‚´ìš©</div>
            </div>
            ${isEditing ? `
              <textarea class="template-textarea" id="inlineEditContent">${selectedTemplate.content}</textarea>
            ` : `
              <div class="template-preview">${highlightVariables(displayContent)}</div>
            `}
          </div>
        </div>
      `;
    }

    // ë³€ìˆ˜ í•˜ì´ë¼ì´íŠ¸
    function highlightVariables(content) {
      return content.replace(/\{([^}]+)\}/g, '<span class="highlight-var">{$1}</span>');
    }

    // ë³€ìˆ˜ ì˜µì…˜ ì„ íƒ
    function selectVariableOption(option) {
      selectedVariableOption = option;
      renderTemplateDetail();
    }

    // ë³€ìˆ˜ ì˜µì…˜ ì¶”ê°€ ëª¨ë‹¬
    function openAddVariableModal() {
      document.getElementById('newVariableInput').value = '';
      document.getElementById('addVariableModal').classList.add('show');
    }

    function closeAddVariableModal() {
      document.getElementById('addVariableModal').classList.remove('show');
    }

    function confirmAddVariable() {
      const newValue = document.getElementById('newVariableInput').value.trim();
      if (!newValue) {
        alert('ì˜µì…˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      const mediumCat = templateData[selectedLargeCategory].subCategories[selectedMediumCategory];
      if (mediumCat.variableOptions.includes(newValue)) {
        alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.');
        return;
      }

      mediumCat.variableOptions.push(newValue);
      selectedVariableOption = newValue;
      
      closeAddVariableModal();
      renderTemplateDetail();
      alert(`'${newValue}'ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }

    // ì¸ë¼ì¸ ìˆ˜ì •
    function toggleEdit() {
      isEditing = !isEditing;
      renderTemplateDetail();
    }

    function saveInlineEdit() {
      const content = document.getElementById('inlineEditContent').value.trim();
      if (!content) {
        alert('í…œí”Œë¦¿ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;
      const idx = templates.findIndex(t => t.id === selectedTemplate.id);
      templates[idx].content = content;
      selectedTemplate = templates[idx];
      
      isEditing = false;
      renderTemplateDetail();
      alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    // ì¶”ê°€ ëª¨ë‹¬
    function openAddModal() {
      editMode = 'add';
      document.getElementById('editModalTitle').textContent = 'í…œí”Œë¦¿ ì¶”ê°€';
      document.getElementById('editName').value = '';
      document.getElementById('editKeywords').value = '';
      document.getElementById('editContent').value = 'ì•ˆë…•í•˜ì„¸ìš”, {merchantName} ë‹´ë‹¹ìë‹˜.\n\n\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”.\nê°ì‚¬í•©ë‹ˆë‹¤.';
      document.getElementById('editModal').classList.add('show');
    }

    // ìˆ˜ì • ëª¨ë‹¬
    function openEditModal(id) {
      editMode = 'edit';
      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;
      const template = templates.find(t => t.id === id);
      
      document.getElementById('editModalTitle').textContent = 'í…œí”Œë¦¿ ìˆ˜ì •';
      document.getElementById('editName').value = template.name;
      document.getElementById('editKeywords').value = template.keywords.join(', ');
      document.getElementById('editContent').value = template.content;
      document.getElementById('editModal').classList.add('show');
      
      selectedTemplate = template;
    }

    function closeEditModal() {
      document.getElementById('editModal').classList.remove('show');
      editMode = null;
    }

    // ì €ì¥
    function saveTemplate() {
      const name = document.getElementById('editName').value.trim();
      const keywords = document.getElementById('editKeywords').value.split(',').map(k => k.trim()).filter(k => k);
      const content = document.getElementById('editContent').value.trim();

      if (!name) {
        alert('í…œí”Œë¦¿ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (keywords.length === 0) {
        alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!content) {
        alert('í…œí”Œë¦¿ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;

      if (editMode === 'add') {
        const newTemplate = { id: nextId++, name, keywords, content };
        templates.push(newTemplate);
        selectedTemplate = newTemplate;
        alert('í…œí”Œë¦¿ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
      } else {
        const idx = templates.findIndex(t => t.id === selectedTemplate.id);
        templates[idx] = { ...templates[idx], name, keywords, content };
        selectedTemplate = templates[idx];
        alert('í…œí”Œë¦¿ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
      }

      closeEditModal();
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // ì‚­ì œ ëª¨ë‹¬
    function openDeleteModal(id) {
      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;
      const template = templates.find(t => t.id === id);
      
      deleteTargetId = id;
      document.getElementById('deleteTemplateName').textContent = template.name;
      document.getElementById('deleteModal').classList.add('show');
    }

    function closeDeleteModal() {
      document.getElementById('deleteModal').classList.remove('show');
      deleteTargetId = null;
    }

    function confirmDelete() {
      const templates = templateData[selectedLargeCategory].subCategories[selectedMediumCategory].templates;
      const idx = templates.findIndex(t => t.id === deleteTargetId);
      
      if (idx > -1) {
        templates.splice(idx, 1);
        if (selectedTemplate?.id === deleteTargetId) {
          selectedTemplate = null;
        }
        alert('í…œí”Œë¦¿ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
      }

      closeDeleteModal();
      renderMiddleColumn();
      renderTemplateDetail();
    }

    // ==================== ë¬¸ì˜ ì²˜ë¦¬ ====================
    function filterInquiry(status, btn) {
      currentInquiryStatus = status;
      selectedInquiry = null;
      
      document.querySelectorAll('.status-tab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      
      // ì™„ë£Œ ëª¨ë“œì¼ ë•Œ ê·¸ë¦¬ë“œ ë³€ê²½
      const inquiryColumn = document.querySelector('.inquiry-column');
      if (status === 'completed') {
        inquiryColumn.classList.add('completed-mode');
      } else {
        inquiryColumn.classList.remove('completed-mode');
      }
      
      renderInquiryList();
      renderInquiryDetail();
      renderResponseArea();
    }

    function renderInquiryList() {
      const list = document.getElementById('inquiryList');
      if (!list) return;
      
      const data = currentInquiryStatus === 'pending' ? inquiries : completedInquiries;
      
      list.innerHTML = data.map(inq => `
        <div class="inquiry-item ${selectedInquiry?.id === inq.id ? 'active' : ''}" onclick="selectInquiry(${inq.id})">
          <div class="inquiry-merchant">${inq.merchant}</div>
          <div class="inquiry-preview">${inq.content}</div>
          <div class="inquiry-meta">
            <span>${inq.date}</span>
            ${inq.status === 'completed' ? `
              <span class="inquiry-badge ${inq.wasModified ? 'badge-modified' : 'badge-original'}">
                ${inq.wasModified ? 'ìˆ˜ì •' : 'ì›ë³¸'}
              </span>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    function selectInquiry(id) {
      const data = currentInquiryStatus === 'pending' ? inquiries : completedInquiries;
      selectedInquiry = data.find(inq => inq.id === id);
      
      // í…œí”Œë¦¿ ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
      responseSelectedLarge = null;
      responseSelectedMedium = null;
      responseSelectedTemplateId = null;
      originalTemplate = '';
      
      renderInquiryList();
      renderInquiryDetail();
      renderResponseArea();
    }

    function findMatchingTemplate(content) {
      const lowerContent = content.toLowerCase();
      let bestMatch = null;
      let bestScore = 0;

      Object.values(templateData).forEach(largeCat => {
        Object.values(largeCat.subCategories).forEach(mediumCat => {
          mediumCat.templates.forEach(t => {
            let score = 0;
            let matchedKeywords = 0;
            
            t.keywords.forEach(keyword => {
              if (lowerContent.includes(keyword.toLowerCase())) {
                score += keyword.length; // ê¸´ í‚¤ì›Œë“œì¼ìˆ˜ë¡ ë†’ì€ ì ìˆ˜
                matchedKeywords++;
              }
            });
            
            // ë§¤ì¹­ëœ í‚¤ì›Œë“œ ë¹„ìœ¨ë„ ê³ ë ¤ (ë” ì •í™•í•œ ë§¤ì¹­ ìš°ì„ )
            if (matchedKeywords > 0) {
              score += (matchedKeywords / t.keywords.length) * 10;
            }
            
            if (score > bestScore) {
              bestScore = score;
              bestMatch = { ...t, categoryName: mediumCat.name };
            }
          });
        });
      });

      return bestMatch;
    }

    function renderInquiryDetail() {
      const container = document.getElementById('inquiryDetail');
      if (!container) return;
      
      if (!selectedInquiry) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“¥</div>
            <div class="empty-state-text">ë¬¸ì˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
            <div class="empty-state-hint">ì¢Œì¸¡ ëª©ë¡ì—ì„œ ë¬¸ì˜ë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
          </div>
        `;
        return;
      }

      if (currentInquiryStatus === 'completed') {
        container.innerHTML = `
          <div class="inquiry-detail-container">
            <div class="inquiry-detail-header">
              <div class="inquiry-detail-merchant">${selectedInquiry.merchant}</div>
              <div class="inquiry-detail-date">${selectedInquiry.date} Â· ${selectedInquiry.wasModified ? 'ìˆ˜ì • ë°œì†¡' : 'ì›ë³¸ ì‚¬ìš©'}</div>
            </div>
            
            <div class="section-label">ğŸ“¨ ë¬¸ì˜ ë‚´ìš©</div>
            <div class="inquiry-detail-content">${selectedInquiry.content}</div>
            
            <div class="section-label">ğŸ“‹ ì‚¬ìš© í…œí”Œë¦¿: ${selectedInquiry.templateUsed}</div>
            ${selectedInquiry.wasModified ? `
              <div class="compare-grid">
                <div>
                  <div class="compare-box-label original">ì›ë³¸ í…œí”Œë¦¿</div>
                  <div class="compare-box compare-box-original">${selectedInquiry.originalContent}</div>
                </div>
                <div>
                  <div class="compare-box-label modified">ìˆ˜ì •ëœ ë‚´ìš©</div>
                  <div class="compare-box compare-box-modified">${selectedInquiry.finalContent}</div>
                </div>
              </div>
              <div class="modify-reason-display">
                <div class="modify-reason-display-label">ìˆ˜ì • ì‚¬ìœ </div>
                <div class="modify-reason-display-text">${selectedInquiry.modifyReason}</div>
              </div>
            ` : `
              <div class="compare-box compare-box-original">${selectedInquiry.finalContent}</div>
            `}
          </div>
        `;
        return;
      }

      const matchedTemplate = findMatchingTemplate(selectedInquiry.content);

      container.innerHTML = `
        <div class="inquiry-detail-container">
          <div class="inquiry-detail-header">
            <div class="inquiry-detail-merchant">${selectedInquiry.merchant}</div>
            <div class="inquiry-detail-date">${selectedInquiry.date}</div>
          </div>
          
          <div class="inquiry-detail-content">${selectedInquiry.content}</div>
          
          ${matchedTemplate ? `
            <div class="template-recommend">
              <div class="template-recommend-label">âœ¨ í‚¤ì›Œë“œ ë§¤ì¹­ ì¶”ì²œ</div>
              <div class="template-recommend-name">${matchedTemplate.name}</div>
              <div class="template-recommend-keywords">${matchedTemplate.categoryName} Â· ${matchedTemplate.keywords.join(', ')}</div>
            </div>
          ` : `
            <div class="no-template-box">
              ë§¤ì¹­ë˜ëŠ” í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì‘ì„±í•˜ê±°ë‚˜ í…œí”Œë¦¿ ê´€ë¦¬ì—ì„œ ì„ íƒí•´ì£¼ì„¸ìš”.
            </div>
          `}
        </div>
      `;
    }

    function renderResponseArea() {
      const container = document.getElementById('responseArea');
      if (!container) return;
      
      // ì™„ë£Œëœ ë¬¸ì˜ì¼ ë•ŒëŠ” 3ì—´ ìˆ¨ê¸°ê¸°
      if (currentInquiryStatus === 'completed') {
        container.parentElement.style.display = 'none';
        return;
      } else {
        container.parentElement.style.display = '';
      }
      
      if (!selectedInquiry) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">âœï¸</div>
            <div class="empty-state-text">ì‘ë‹µ ì‘ì„±</div>
            <div class="empty-state-hint">ë¬¸ì˜ë¥¼ ì„ íƒí•˜ë©´ í…œí”Œë¦¿ì´ ì¶”ì²œë©ë‹ˆë‹¤</div>
          </div>
        `;
        return;
      }

      // ìë™ ë§¤ì¹­ ì²˜ë¦¬
      if (!responseSelectedLarge && !responseSelectedMedium && !responseSelectedTemplateId) {
        const matchedTemplate = findMatchingTemplate(selectedInquiry.content);
        if (matchedTemplate) {
          // ë§¤ì¹­ëœ í…œí”Œë¦¿ì˜ ì¹´í…Œê³ ë¦¬ ì°¾ê¸°
          Object.entries(templateData).forEach(([largeKey, largeCat]) => {
            Object.entries(largeCat.subCategories).forEach(([medKey, medCat]) => {
              const found = medCat.templates.find(t => t.id === matchedTemplate.id);
              if (found) {
                responseSelectedLarge = largeKey;
                responseSelectedMedium = medKey;
                responseSelectedTemplateId = found.id;
                originalTemplate = found.content.replace('{merchantName}', selectedInquiry.merchant);
              }
            });
          });
        }
      }

      // ëŒ€ë¶„ë¥˜ ë²„íŠ¼
      let largeCatHtml = Object.entries(templateData).map(([key, cat]) => `
        <button class="tpl-chip ${responseSelectedLarge === key ? 'active' : ''}" onclick="selectResponseLarge('${key}')">
          ${cat.name}
        </button>
      `).join('');

      // ì¤‘ë¶„ë¥˜ ë²„íŠ¼ (ëŒ€ë¶„ë¥˜ ì„ íƒ ì‹œ)
      let medCatHtml = '';
      if (responseSelectedLarge) {
        const largeCat = templateData[responseSelectedLarge];
        medCatHtml = `
          <div class="tpl-step">
            <span class="tpl-step-arrow">â†’</span>
            ${Object.entries(largeCat.subCategories).map(([key, cat]) => `
              <button class="tpl-chip small ${responseSelectedMedium === key ? 'active' : ''}" onclick="selectResponseMedium('${key}')">
                ${cat.name}
              </button>
            `).join('')}
          </div>
        `;
      }

      // ì„¸ë¶€ìœ í˜• ë²„íŠ¼ (ì¤‘ë¶„ë¥˜ ì„ íƒ ì‹œ)
      let templateListHtml = '';
      if (responseSelectedLarge && responseSelectedMedium) {
        const medCat = templateData[responseSelectedLarge].subCategories[responseSelectedMedium];
        templateListHtml = `
          <div class="tpl-step">
            <span class="tpl-step-arrow">â†’</span>
            ${medCat.templates.map(t => `
              <button class="tpl-chip small ${responseSelectedTemplateId === t.id ? 'active' : ''}" onclick="selectResponseTemplate(${t.id})">
                ${t.name}
              </button>
            `).join('')}
          </div>
        `;
      }

      container.innerHTML = `
        <div class="response-container">
          <div class="response-header">
            <span class="response-label">ì‘ë‹µ ë‚´ìš©</span>
            <button class="btn btn-secondary btn-small" onclick="resetResponse()">â†º ì´ˆê¸°í™”</button>
          </div>
          
          <div class="template-picker">
            <div class="tpl-picker-label">ğŸ“‚ í…œí”Œë¦¿ ì„ íƒ</div>
            <div class="tpl-step">
              ${largeCatHtml}
            </div>
            ${medCatHtml}
            ${templateListHtml}
          </div>
          
          <div class="textarea-wrap">
            <textarea class="response-textarea" id="responseContent" oninput="checkModified()">${originalTemplate}</textarea>
            <div class="textarea-controls">
              <button class="size-btn" onclick="resizeTextarea(-100)" title="ì¤„ì´ê¸°">âˆ’</button>
              <button class="size-btn" onclick="resizeTextarea(100)" title="ëŠ˜ë¦¬ê¸°">+</button>
            </div>
          </div>
          
          <div class="modify-reason-box" id="modifyReasonBox" style="display: none;">
            <div class="modify-reason-label">ìˆ˜ì • ì‚¬ìœ </div>
            <input class="modify-reason-input" id="modifyReason" placeholder="ìˆ˜ì • ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          
          <div class="response-actions">
            <button class="btn btn-secondary" onclick="cancelResponse()">ì·¨ì†Œ</button>
            <button class="btn btn-primary" id="sendBtn" onclick="sendResponse()">ë°œì†¡</button>
          </div>
        </div>
      `;
      
      // ìˆ˜ì • ì—¬ë¶€ ì²´í¬
      setTimeout(() => checkModified(), 0);
    }

    // ì‘ë‹µ ì˜ì—­ í…œí”Œë¦¿ ì„ íƒ ìƒíƒœ
    let responseSelectedLarge = null;
    let responseSelectedMedium = null;
    let responseSelectedTemplateId = null;

    function selectResponseLarge(key) {
      responseSelectedLarge = key;
      responseSelectedMedium = null;
      responseSelectedTemplateId = null;
      renderResponseArea();
    }

    function selectResponseMedium(key) {
      responseSelectedMedium = key;
      responseSelectedTemplateId = null;
      renderResponseArea();
    }

    function selectResponseTemplate(id) {
      responseSelectedTemplateId = id;
      const template = templateData[responseSelectedLarge].subCategories[responseSelectedMedium].templates.find(t => t.id === id);
      
      if (template) {
        let content = template.content.replace('{merchantName}', selectedInquiry.merchant);
        // ê°„í¸ê²°ì œ ë³€ìˆ˜ ì²˜ë¦¬
        if (template.variable) {
          const medCat = templateData[responseSelectedLarge].subCategories[responseSelectedMedium];
          if (medCat.variableOptions && medCat.variableOptions.length > 0) {
            content = content.replace(new RegExp(`{${template.variable}}`, 'g'), medCat.variableOptions[0]);
          }
        }
        originalTemplate = content;
      }
      renderResponseArea();
    }

    function onTemplateSelect() {
      // deprecated - ì´ì œ ë‹¨ê³„ë³„ ì„ íƒ ì‚¬ìš©
    }

    function checkModified() {
      const content = document.getElementById('responseContent').value;
      const modifyBox = document.getElementById('modifyReasonBox');
      const sendBtn = document.getElementById('sendBtn');
      
      if (content !== originalTemplate && originalTemplate !== '') {
        modifyBox.style.display = 'block';
        sendBtn.textContent = 'ìˆ˜ì • í›„ ë°œì†¡';
      } else {
        modifyBox.style.display = 'none';
        sendBtn.textContent = 'ë°œì†¡';
      }
    }

    function resetResponse() {
      // ìë™ ë§¤ì¹­ìœ¼ë¡œ ë‹¤ì‹œ ì„ íƒ
      responseSelectedLarge = null;
      responseSelectedMedium = null;
      responseSelectedTemplateId = null;
      originalTemplate = '';
      renderResponseArea();
    }

    function resizeTextarea(delta) {
      const textarea = document.getElementById('responseContent');
      if (textarea) {
        const currentHeight = textarea.offsetHeight;
        const newHeight = Math.max(150, currentHeight + delta);
        textarea.style.height = newHeight + 'px';
      }
    }

    function cancelResponse() {
      selectedInquiry = null;
      renderInquiryList();
      renderInquiryDetail();
      renderResponseArea();
    }

    function sendResponse() {
      const content = document.getElementById('responseContent').value;
      const isModified = content !== originalTemplate && originalTemplate !== '';
      const reason = isModified ? document.getElementById('modifyReason').value : '';
      
      if (isModified && !reason) {
        alert('ìˆ˜ì • ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (!content.trim()) {
        alert('ì‘ë‹µ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      // ì™„ë£Œ ëª©ë¡ì— ì¶”ê°€
      const matchedTemplate = findMatchingTemplate(selectedInquiry.content);
      completedInquiries.unshift({
        id: Date.now(),
        merchant: selectedInquiry.merchant,
        content: selectedInquiry.content,
        date: new Date().toLocaleDateString('ko-KR', { month: '2-digit', day: '2-digit' }).replace('. ', '-').replace('.', ''),
        status: 'completed',
        wasModified: isModified,
        templateUsed: matchedTemplate ? matchedTemplate.name : 'ì§ì ‘ ì‘ì„±',
        originalContent: originalTemplate,
        finalContent: content,
        modifyReason: reason
      });

      alert(`ì‘ë‹µì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n${isModified ? '(ìˆ˜ì • ë°œì†¡ - ì‚¬ìœ : ' + reason + ')' : '(ì›ë³¸ ì‚¬ìš©)'}`);
      
      // ëŒ€ê¸° ëª©ë¡ì—ì„œ ì œê±°
      const idx = inquiries.findIndex(inq => inq.id === selectedInquiry.id);
      if (idx > -1) {
        inquiries.splice(idx, 1);
      }
      
      selectedInquiry = null;
      
      // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
      document.getElementById('pendingCount').textContent = inquiries.length;
      document.getElementById('completedCount').textContent = completedInquiries.length;
      
      renderInquiryList();
      renderInquiryDetail();
      renderResponseArea();
      renderInsight();
    }
  </script>
</body>
</html>
